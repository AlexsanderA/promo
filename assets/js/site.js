!function(e){}(jQuery),function(e){function a(){var a=new ymaps.Map("PopMap",{center:[53.544781,49.347234],zoom:16,controls:["zoomControl"]}),t=new ymaps.ObjectManager({clusterize:!0,gridSize:32});e.ajax({url:"/ajax/map",type:"POST",success:function(e){"false"!=e&&(t.add(e),a.geoObjects.add(t),a.setBounds(t.getBounds(),{checkZoomRange:!0}),a.getZoom()>18&&a.setZoom(14))}})}e(function(){e(".map-popup").on("click",function(t){t.preventDefault();var i=e("body"),n={position:"fixed",left:"0",right:"0",top:"0",bottom:"0","z-index":"9999"},o=e('<i class="material-icons">clear</i>'),r=e("<div id='PopMap'></div>").css(n).prepend(o);if(i.prepend(r).css("overflow","hidden"),o.click(function(){r.remove(),i.removeAttr("style")}),e(this).hasClass("map-init"))a();else{var s="//api-maps.yandex.ru/2.1/?lang=ru_RU";e.getScript(s,function(){ymaps.ready(function(){a()})}),e(this).addClass("map-init")}})}),e.extend(!0,e.magnificPopup.defaults,{mainClass:"mfp-with-zoom",closeBtnInside:!1,zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(e){return e.is("img")?e:e.find("img")}},tClose:"Закрыть (Esc)",tLoading:"Загрузка...",gallery:{tPrev:"Назад",tNext:"Вперед",tCounter:"%curr% из %total%"},image:{tError:'<a href="%url%">Изображение</a> не найдено.'},ajax:{tError:'<a href="%url%">Содержимое</a> не найдено.'}}),e(".image-popup").magnificPopup({type:"image"}),e(".image-gallery").each(function(){e(this).magnificPopup({delegate:".image-item",type:"image",gallery:{enabled:!0,preload:[1,1]}})}),e(".iframe-popup").magnificPopup({type:"iframe"}),e(".ajax-popup").magnificPopup({type:"ajax"}),e(document).on("ready ajaxComplete",function(){e(".ajax-form").on("submit",function(a){a.preventDefault();var t=e(this),i=e(this).serialize();e(this).find("button:submit").html('<i class="material-icons refresh-animate">cached</i></span>&nbsp;Подождите...').addClass("disabled"),e.ajax({url:t.attr("action"),type:t.attr("method"),data:i,success:function(a){t.replaceWith(e(a).children())},error:function(){alert("Что-то пошло не так. Попробуйте позже.")}})}),e(".has-error").children(":input").on("change",function(a){e(a.target).parent().removeClass("has-error"),e(a.target).siblings(".help-block-error").remove()})})}(jQuery);